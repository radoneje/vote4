extends _layout
block head
block content
    .content#app
        .mainTower
            .mainGrid
                .mainSection
                    .btn(@click="addEvent()") Добавить мероприятие
                .mainSection(v-for="event in events")
                    input.mainInput(placeholder="Введите название мероприятия" v-model="event.title" v-on:change="changeEvent(event)")
                    .flex.between.mt-3
                        .btn(@click="addEvent()") Перейти к мероприятию
                        .btn(@click="addEvent()") Удалить

    script(src="/lib/vue.js")
    script(type="module").
        import SocketClass from './scripts/classes/socketClass.js'
        let app=new Vue({
            el:"#app",
            data:{
                events:[]
            },
            methods:{
                changeEvent: async function (event) {
                    let r = await postJson("/api/event", event)

                },
                addEvent:async function(){
                    let r=await postJson("/api/event",{userid:1})
                    this.events.unshift(r)
                    console.log(this.events)
                }
            },
            mounted:async function(){
                setTimeout(async ()=>{this.events=await getJson("/api/event");},500)


            }

        })
